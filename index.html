<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>DILYARA KUNANBAYEVA | MODEL PORTFOLIO</title>
    <meta name="description" content="Portfolio of Dilyara Kunanbayeva, a commercial model based in Almaty, Kazakhstan. Specializing in beauty, streetwear, and UGC content.">
    
    <!-- Open Graph / Facebook / Telegram -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://dilyara.kz/">
    <meta property="og:title" content="DILYARA KUNANBAYEVA | MODEL">
    <meta property="og:description" content="Commercial model based in Almaty. Beauty, Streetwear, UGC.">
    <meta property="og:image" content="./img/IMG_6543.JPG">

    <!-- Schema.org JSON-LD -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Dilyara Kunanbayeva",
      "url": "https://dilyara.kz",
      "image": "https://dilyara.kz/img/IMG_6543.JPG",
      "jobTitle": "Commercial Model",
      "address": { "@type": "PostalAddress", "addressLocality": "Almaty", "addressCountry": "KZ" },
      "sameAs": [ "https://instagram.com/bydilyara", "https://t.me/xiao_odi" ]
    }
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600&family=Syne:wght@400;700;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ["Space Grotesk", "sans-serif"],
                        display: ["Syne", "sans-serif"],
                    },
                    colors: { black: "#050505", white: "#FFFFFF", gray: "#F3F3F3" }
                },
            },
        }
    </script>
    <style>
        ::-webkit-scrollbar { width: 0px; }
        html { scroll-behavior: smooth; }

        .bg-noise {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
        }
        .lang-active { text-decoration: underline; text-underline-offset: 4px; }
        .filter-btn { position: relative; transition: all 0.3s ease; padding: 4px 12px; border-radius: 6px; }
        .filter-btn::after {
            content: '';
            position: absolute;
            left: 0; bottom: 0;
            width: 0; height: 3px;
            background-color: currentColor;
            transition: width 0.3s ease;
        }
        .filter-btn:hover::after { width: 100%; }
        .filter-btn.active { background-color: black; color: white; }
        .filter-btn.active::after { display: none; }
        .filter-btn:hover { opacity: 0.7; }

        .media-item { transition: opacity 0.3s ease, transform 0.3s ease; }
        .media-item.filtering { opacity: 0; transform: scale(0.9); }
        .media-item.hidden-item { display: none !important; }

        /* ── ФОТО-СЕТКА 3 В РЯД ── */
        #photo-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr); /* На телефоне 2 колонки (крупнее) */
            gap: 4px;
        }
        @media (min-width: 768px) {
            #photo-grid { grid-template-columns: repeat(3, 1fr); } /* На компьютере 3 колонки */
        }
        #photo-grid .photo-thumb {
            position: relative;
            width: 100%;
            aspect-ratio: 2 / 3; /* Профессиональный вертикальный формат */
            overflow: hidden;
            cursor: zoom-in;
            background-color: #e5e5e5;
        }
        #photo-grid .photo-thumb img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            transition: transform 0.5s ease;
        }
        #photo-grid .photo-thumb:hover img { transform: scale(1.05); }
        #photo-grid .photo-thumb .zoom-overlay {
            position: absolute; inset: 0;
            background: rgba(0,0,0,0.3);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            opacity: 0; transition: opacity 0.3s ease;
        }
        #photo-grid .photo-thumb:hover .zoom-overlay { opacity: 1; }
        #photo-grid .photo-thumb .zoom-overlay i {
            color: white; font-size: 2.5rem;
            transform: scale(0.8); transition: transform 0.3s ease;
        }
        #photo-grid .photo-thumb:hover .zoom-overlay i { transform: scale(1); }
        #photo-grid .photo-thumb .zoom-overlay .photo-cat {
            margin-top: 0.5rem;
            color: white; font-size: 0.75rem; font-weight: bold;
            text-transform: uppercase; letter-spacing: 0.2em;
            transform: translateY(10px); transition: transform 0.3s ease;
        }
        #photo-grid .photo-thumb:hover .zoom-overlay .photo-cat { transform: translateY(0); }
        #photo-grid .photo-thumb.hidden-item { display: none !important; }
        #photo-grid .empty-state { grid-column: 1 / -1; }

        /* ── ВИДЕО-СЕТКА 3 В РЯД ── */
        #video-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 4px;
        }
        #video-grid .video-thumb {
            width: 100%;
            aspect-ratio: 9 / 16;
            background: #1a1a1a;
            border: 1px solid #2a2a2a;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        #video-grid .video-thumb img,
        #video-grid .video-thumb video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        #video-grid .video-thumb .play-overlay {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.25);
            transition: background 0.3s ease;
            z-index: 10;
        }
        #video-grid .video-thumb:hover .play-overlay { background: rgba(0,0,0,0.5); }
        #video-grid .video-thumb .play-overlay i {
            font-size: 2.5rem;
            color: white;
            opacity: 0.7;
            transition: opacity 0.2s, transform 0.2s;
        }
        #video-grid .video-thumb:hover .play-overlay i { opacity: 1; transform: scale(1.1); }

        #video-grid .video-thumb .mute-btn {
            position: absolute;
            top: 10px; right: 10px;
            width: 30px; height: 30px;
            background: rgba(0,0,0,0.6);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            color: white; font-size: 1rem;
            z-index: 20; opacity: 0;
            transition: opacity 0.2s, transform 0.2s;
        }
        #video-grid .video-thumb:hover .mute-btn { opacity: 1; }
        #video-grid .video-thumb .mute-btn:hover { transform: scale(1.1); background: rgba(0,0,0,0.8); }

        #video-grid .video-thumb .reels-icon {
            position: absolute;
            top: 10px; right: 10px;
            color: white; font-size: 1.2rem;
            z-index: 15;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
            transition: opacity 0.2s;
            pointer-events: none;
        }
        #video-grid .video-thumb:hover .reels-icon { opacity: 0; }

        /* Скрываем затемнение и иконку Play, когда видео воспроизводится */
        #video-grid .video-thumb.playing .play-overlay { opacity: 0; }

        /* Loader для видео в сетке */
        #video-grid .grid-video-loader {
            position: absolute;
            top: 50%; left: 50%;
            width: 32px; height: 32px;
            border: 3px solid rgba(255,255,255,0.2);
            border-top: 3px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            z-index: 15;
            display: none; /* Hidden by default */
            pointer-events: none;
        }

        #video-grid .video-thumb .vid-label {
            position: absolute;
            bottom: 6px;
            left: 8px;
            font-size: 9px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: white;
            opacity: 0.5;
            z-index: 10;
        }
        #video-grid .empty-state { grid-column: 1 / -1; }

        /* ── ФОТО ЛАЙТБОКС ── */
        #lightbox {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        #lightbox.open { display: flex; }
        #lightbox-img {
            max-width: 88vw;
            max-height: 88vh;
            object-fit: contain;
            box-shadow: 0 0 80px rgba(0,0,0,0.9);
            cursor: zoom-in;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }
        #lightbox-img.zoomed {
            transform: scale(1.75);
            cursor: grab;
        }
        #lightbox-img.zoomed:active {
            cursor: grabbing;
        }

        /* ── ВИДЕО ЛАЙТБОКС ── */
        #video-lightbox {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        #video-lightbox.open { display: flex; }
        #video-lightbox-inner {
            position: relative;
            width: min(420px, 90vw);
            cursor: default;
        }
        /* Адаптация для горизонтальных видео (YouTube/Vimeo) */
        #video-lightbox-inner.landscape {
            width: min(800px, 90vw);
        }
        #video-lightbox-inner.portrait iframe {
            aspect-ratio: 9 / 16;
        }

        #video-lightbox-inner video {
            width: 100%;
            aspect-ratio: 9 / 16;
            object-fit: contain;
            background: #000;
            display: block;
        }
        #video-lightbox-inner iframe {
            width: 100%;
            aspect-ratio: 16 / 9;
            background: #111;
            display: block;
        }
        #video-lightbox-title {
            margin-top: 0.75rem;
            font-size: 0.65rem;
            font-weight: bold;
            letter-spacing: 0.25em;
            text-transform: uppercase;
            color: white;
            opacity: 0.4;
            text-align: center;
        }

        /* Общие элементы лайтбоксов */
        .lb-close {
            position: absolute; top: 1.2rem; right: 1.5rem;
            color: white; font-size: 2.2rem; cursor: pointer;
            opacity: 0.6; transition: opacity 0.2s; line-height: 1; z-index: 10;
        }
        .lb-close:hover { opacity: 1; }
        .lb-share {
            position: absolute; top: 1.5rem; right: 4.5rem;
            color: white; font-size: 1.8rem; cursor: pointer;
            opacity: 0.6; transition: opacity 0.2s; line-height: 1; z-index: 10;
        }
        .lb-share:hover { opacity: 1; }
        .lb-download {
            position: absolute; top: 1.5rem; right: 7.5rem;
            color: white; font-size: 1.8rem; cursor: pointer;
            opacity: 0.6; transition: opacity 0.2s; line-height: 1; z-index: 10;
        }
        .lb-download:hover { opacity: 1; }
        .lb-prev, .lb-next {
            position: absolute; top: 50%; transform: translateY(-50%);
            color: white; font-size: 3.5rem; cursor: pointer;
            opacity: 0.35; transition: opacity 0.2s;
            padding: 1rem 1.5rem; user-select: none; z-index: 10;
        }
        .lb-prev:hover, .lb-next:hover { opacity: 1; }
        .lb-prev { left: 0; }
        .lb-next { right: 0; }
        .lb-counter {
            position: absolute; bottom: 1.5rem; left: 50%; transform: translateX(-50%);
            color: white; font-size: 0.65rem; font-weight: bold;
            letter-spacing: 0.25em; opacity: 0.4;
            pointer-events: none;
        }

        /* Пустое состояние */
        .empty-state {
            display: none; text-align: center; padding: 3rem;
            opacity: 0.4; font-weight: bold; text-transform: uppercase;
            letter-spacing: 0.2em; font-size: 0.8rem;
        }
        .empty-state.visible { display: block; }

        /* Анимация появления */
        .fade-in-up {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .fade-in-up.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Бегущая строка */
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        .animate-marquee {
            display: flex;
            width: max-content;
            animation: marquee 20s linear infinite;
        }
        .animate-marquee:hover {
            animation-play-state: paused;
        }

        /* Loader для видео */
        .video-loader {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 48px; height: 48px;
            border: 4px solid rgba(255,255,255,0.2);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            z-index: 20;
            display: none;
            pointer-events: none;
        }
        @keyframes spin { 0% { transform: translate(-50%, -50%) rotate(0deg); } 100% { transform: translate(-50%, -50%) rotate(360deg); } }

        /* Анимация для JS Observer */
        .reveal-item {
            opacity: 0;
            transform: translateY(40px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }
        .reveal-item.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* ── ADMIN PANEL ── */
        #admin-panel {
            display: none;
            position: fixed; bottom: 0; left: 0; right: 0;
            background: #050505; color: white;
            padding: 24px; z-index: 10001;
            border-top: 1px solid #333;
            font-family: 'Space Grotesk', sans-serif;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.5);
        }
        #admin-panel.active { display: block; }
        .drop-zone {
            border: 2px dashed #333; padding: 30px;
            text-align: center; margin-bottom: 16px;
            cursor: pointer; transition: all 0.2s;
            border-radius: 8px; background: #111;
            color: #888; text-transform: uppercase; letter-spacing: 0.1em; font-size: 0.8rem;
        }
        .drop-zone:hover, .drop-zone.dragover { background: #1a1a1a; border-color: #666; color: white; }
        .admin-controls { display: flex; gap: 12px; margin-bottom: 16px; }
        .admin-controls select, .admin-controls input {
            background: #111; border: 1px solid #333; color: white; padding: 8px 12px;
            border-radius: 4px; font-size: 0.9rem; outline: none;
        }
        .admin-controls select:focus, .admin-controls input:focus { border-color: #666; }
        #code-output {
            width: 100%; height: 80px; background: #111;
            border: 1px solid #333; color: #00ff9d; padding: 12px;
            font-size: 11px; font-family: monospace; border-radius: 4px;
            resize: none; outline: none;
        }

        /* Анимация языковой панели */
        #lang-switcher {
            opacity: 0;
            transform: translateY(-20px);
            transition: opacity 1s ease, transform 1s ease, background-color 0.3s;
        }
        #lang-switcher.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Параллакс обертка */
        .parallax-wrapper {
            width: 100%;
            height: 125%;
            position: absolute;
            top: -12.5%;
            left: 0;
            will-change: transform;
        }
    </style>
</head>

<body class="bg-white text-black font-sans selection:bg-black selection:text-white bg-noise overflow-hidden">

    <div id="preloader" class="fixed inset-0 z-[10000] bg-black flex items-center justify-center transition-opacity duration-700">
        <div class="text-white font-display font-bold text-xl tracking-[0.3em] uppercase animate-pulse">Loading</div>
    </div>

    <nav class="absolute top-0 w-full z-50 px-6 py-6 flex flex-col md:flex-row gap-4 md:gap-0 justify-end items-center text-white pointer-events-none">
        <div id="lang-switcher" class="flex gap-4 text-sm font-bold uppercase pointer-events-auto drop-shadow-md bg-black/30 backdrop-blur-sm px-4 py-2 rounded-full hover:bg-black/60">
            <button onclick="setLang('en')" id="btn-en" class="hover:opacity-70 transition-opacity">EN</button>
            <button onclick="setLang('kk')" id="btn-kk" class="hover:opacity-70 transition-opacity">KK</button>
            <button onclick="setLang('ru')" id="btn-ru" class="lang-active hover:opacity-70 transition-opacity">RU</button>
        </div>
    </nav>

    <header class="relative w-full h-screen flex flex-col justify-end p-4 md:p-8 overflow-hidden bg-black">
        <div class="absolute inset-0 z-0">
            <img id="header-img" src="./img/IMG_6543.JPG" fetchpriority="high" class="w-full h-[120%] absolute -top-[10%] left-0 object-cover object-top opacity-70 grayscale contrast-125 will-change-transform">
        </div>
        <div class="relative z-10 w-full mb-8">
            <h1 class="font-display font-extrabold text-[13vw] md:text-[13.5vw] leading-[0.8] text-white uppercase mix-blend-difference tracking-tighter w-full">Dilyara</h1>
            <div class="flex flex-col md:flex-row justify-between items-start md:items-end border-t border-white pt-4 mt-4">
                <h2 class="font-display font-bold text-[8vw] md:text-[5vw] leading-[0.9] text-white uppercase tracking-tighter">Kunanbayeva</h2>
                <div class="mt-4 md:mt-0 text-white text-right text-xs font-bold tracking-[0.2em] uppercase">
                    <span data-i18n="role">Коммерческая модель</span><br>
                    <span data-i18n="location">Алматы, Казахстан</span>
                </div>
            </div>
        </div>
    </header>

    <section id="about" class="grid grid-cols-1 md:grid-cols-12 gap-12 p-6 md:p-12 mt-12 max-w-[1600px] mx-auto">
        <div class="md:col-span-6 md:sticky md:top-24">
            <h3 class="font-display font-extrabold text-6xl md:text-7xl uppercase mb-6 leading-[0.9] fade-in-up" data-i18n="about_title">О модели</h3>
            <p class="text-base md:text-lg leading-relaxed mb-8 font-normal max-w-md fade-in-up" data-i18n="about_text">
                В моделинге с 2025 года. Специализация: beauty, наружная реклама, street-style. Активно снимаюсь в Reels, Shorts и рекламных интеграциях. Профессионально создаю UGC-контент.
            </p>
            <div class="mb-8 fade-in-up">
                <p class="text-xs font-bold uppercase tracking-widest mb-4 border-b border-black pb-2">Trusted By</p>
                <div class="grid grid-cols-3 gap-y-4 gap-x-4 opacity-80">
                    <div class="font-display font-bold text-lg md:text-xl uppercase">1fit</div>
                    <div class="font-display font-bold text-lg md:text-xl uppercase">KFC</div>
                    <div class="font-display font-bold text-lg md:text-xl uppercase">Yichang</div>
                    <div class="font-display font-bold text-lg md:text-xl uppercase">Nescafe</div>
                    <div class="font-display font-bold text-lg md:text-xl uppercase">Doritos</div>
                    <div class="font-display font-bold text-lg md:text-xl uppercase">LC Waikiki</div>
                    <div class="font-display font-bold text-sm md:text-lg uppercase leading-tight">MakeUp<br>Revolution</div>
                    <div class="font-display font-bold text-lg md:text-xl uppercase">Mary Kay</div>
                    <div class="font-display font-bold text-lg md:text-xl uppercase">Eva</div>
                </div>
            </div>
            <div id="model-params" class="border-t-2 border-black pt-6 fade-in-up">
                <div class="grid grid-cols-2 font-bold uppercase tracking-wider gap-y-4">
                    <div class="group cursor-default"><span class="block text-gray-400 text-xs mb-1 transition-colors duration-300 group-hover:text-black">Height</span> <span class="text-lg md:text-xl">165 cm</span></div>
                    <div class="group cursor-default"><span class="block text-gray-400 text-xs mb-1 transition-colors duration-300 group-hover:text-black">Eyes</span> <span class="text-lg md:text-xl">Amber</span></div>
                    <div class="group cursor-default"><span class="block text-gray-400 text-xs mb-1 transition-colors duration-300 group-hover:text-black">Bust</span> <span class="text-lg md:text-xl">82 cm</span></div>
                    <div class="group cursor-default"><span class="block text-gray-400 text-xs mb-1 transition-colors duration-300 group-hover:text-black">Hair</span> <span class="text-lg md:text-xl">Black</span></div>
                    <div class="group cursor-default"><span class="block text-gray-400 text-xs mb-1 transition-colors duration-300 group-hover:text-black">Waist</span> <span class="text-lg md:text-xl">60 cm</span></div>
                    <div class="group cursor-default"><span class="block text-gray-400 text-xs mb-1 transition-colors duration-300 group-hover:text-black">Shoes</span> <span class="text-lg md:text-xl">37.5</span></div>
                    <div class="group cursor-default"><span class="block text-gray-400 text-xs mb-1 transition-colors duration-300 group-hover:text-black">Hips</span> <span class="text-lg md:text-xl">93 cm</span></div>
                </div>
            </div>
        </div>

        <div class="md:col-span-6 grid grid-cols-2 gap-4">
            <div class="aspect-[2/3] overflow-hidden transition-all duration-700">
                <img src="./img/IMG_7263.JPG" class="w-full h-full object-cover hover:scale-105 transition-transform duration-700">
            </div>
            <div class="aspect-[2/3] overflow-hidden mt-16 transition-all duration-700">
                <img src="./img/IMG_8558.JPG" class="w-full h-full object-cover hover:scale-105 transition-transform duration-700">
            </div>
        </div>
    </section>

    <div id="filters-section" class="mt-24 border-t-2 border-b-2 border-black bg-white fade-in-up">
        <div class="text-center py-4 border-b border-gray-200">
            <span class="text-xs font-bold uppercase tracking-[0.3em]" data-i18n="select_category">Выберите категорию</span>
        </div>
        <div class="flex flex-wrap justify-center gap-x-3 md:gap-x-8 gap-y-2 md:gap-y-4 py-6 md:py-8 px-4 font-display text-xl md:text-5xl uppercase font-bold text-center">
            <button onclick="filterContent('all')"        id="filter-all"        class="filter-btn active">All</button>
            <span class="text-gray-300">/</span>
            <button onclick="filterContent('beauty')"     id="filter-beauty"     class="filter-btn">Beauty</button>
            <span class="text-gray-300">/</span>
            <button onclick="filterContent('streetwear')" id="filter-streetwear" class="filter-btn">Streetwear</button>
            <span class="text-gray-300">/</span>
            <button onclick="filterContent('commercial')" id="filter-commercial" class="filter-btn">Commercial</button>
            <span class="text-gray-300">/</span>
            <button onclick="filterContent('casual')"     id="filter-casual"     class="filter-btn">Casual</button>
            <span class="text-gray-300">/</span>
            <button onclick="filterContent('ugc')"        id="filter-ugc"        class="filter-btn">UGC</button>
            <span class="text-gray-300">/</span>
            <button onclick="filterContent('food')"       id="filter-food"       class="filter-btn">Food & Bev</button>
            <span class="text-gray-300">/</span>
            <button onclick="filterContent('acting')"     id="filter-acting"     class="filter-btn">Acting</button>
        </div>
    </div>

    <section id="portfolio-view" class="min-h-screen grid grid-cols-1 md:grid-cols-2">

        <div class="border-r border-black p-6 md:p-12">
            <h3 class="font-display font-bold text-4xl uppercase mb-8 flex items-center gap-4 fade-in-up">
                <i class="ri-camera-fill"></i> <span id="category-title-photo">All</span> Photos
            </h3>
            <div id="photo-grid">
                <!-- Photos will be loaded from data.json -->
                <p id="photo-empty" class="empty-state">Нет фото в этой категории</p>
            </div>
        </div>

        <div class="bg-black text-white p-6 md:p-12">
            <h3 class="font-display font-bold text-4xl uppercase mb-8 flex items-center gap-4 fade-in-up">
                <i class="ri-movie-fill"></i> <span id="category-title-video">All</span> Reels
            </h3>
            <div id="video-grid">
                <!-- Videos will be loaded from data.json -->
                <p id="video-empty" class="empty-state text-white">Нет видео в этой категории</p>
            </div>
        </div>
    </section>

    <div id="lightbox">
        <span class="lb-close" id="lb-photo-close">&#x2715;</span>
        <span class="lb-share" id="lb-photo-share"><i class="ri-share-forward-line"></i></span>
        <span class="lb-download" id="lb-photo-download"><i class="ri-download-line"></i></span>
        <span class="lb-prev" id="lb-photo-prev">&#8249;</span>
        <div class="video-loader" id="photo-loader"></div>
        <img id="lightbox-img" src="" alt="">
        <span class="lb-next" id="lb-photo-next">&#8250;</span>
        <span class="lb-counter" id="lb-photo-counter"></span>
    </div>

    <div id="video-lightbox">
        <span class="lb-close" id="lb-video-close">&#x2715;</span>
        <span class="lb-share" id="lb-video-share"><i class="ri-share-forward-line"></i></span>
        <span class="lb-prev" id="lb-video-prev">&#8249;</span>
        <div id="video-lightbox-inner">
        </div>
        <span class="lb-next" id="lb-video-next">&#8250;</span>
        <span class="lb-counter" id="lb-video-counter"></span>
    </div>

    <footer id="booking" class="bg-white text-black border-t-2 border-black fade-in-up">
        <div class="overflow-hidden border-b-2 border-black py-4 bg-black text-white">
            <div class="animate-marquee">
                <span class="text-4xl md:text-6xl font-display font-bold uppercase px-6">Dilyara Kunanbayeva</span>
                <span class="text-4xl md:text-6xl font-display font-bold uppercase px-6 text-gray-400">Model</span>
                <span class="text-4xl md:text-6xl font-display font-bold uppercase px-6">Dilyara Kunanbayeva</span>
                <span class="text-4xl md:text-6xl font-display font-bold uppercase px-6 text-gray-400">Model</span>
                <span class="text-4xl md:text-6xl font-display font-bold uppercase px-6">Dilyara Kunanbayeva</span>
                <span class="text-4xl md:text-6xl font-display font-bold uppercase px-6 text-gray-400">Model</span>
                <span class="text-4xl md:text-6xl font-display font-bold uppercase px-6">Dilyara Kunanbayeva</span>
                <span class="text-4xl md:text-6xl font-display font-bold uppercase px-6 text-gray-400">Model</span>
            </div>
        </div>
        <div class="p-8 md:p-16">
        <div class="max-w-[1600px] mx-auto grid grid-cols-1 md:grid-cols-2 gap-12">
            <div>
                <h2 class="font-display font-black text-6xl md:text-9xl uppercase mb-8 leading-none tracking-tighter" data-i18n="booking">Контакты</h2>
                <div class="space-y-4">
                    <a href="tg://resolve?domain=xiao_odi" class="text-2xl md:text-4xl font-display font-bold uppercase hover:underline flex items-center gap-4">Telegram ↗</a>
                    <a href="https://instagram.com/bydilyara" target="_blank" class="text-2xl md:text-4xl font-display font-bold uppercase hover:underline flex items-center gap-4">Instagram ↗</a>
                </div>
            </div>
            <div class="flex flex-col justify-end items-start">
                <p class="text-xs font-bold uppercase tracking-[0.2em] mb-6" data-i18n="booking_req_title">Direct Booking</p>
                <p class="text-sm mb-6 max-w-xs opacity-70" data-i18n="booking_req_text">
                    For inquiries and collaboration please contact me via Telegram.
                </p>
                <a href="tg://resolve?domain=xiao_odi" class="bg-black text-white px-8 py-4 text-xs font-bold uppercase tracking-widest hover:bg-gray-800 transition-colors w-full md:w-auto flex items-center justify-center gap-3">
                    <svg viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5"><path d="M20.665 3.717l-17.73 6.837c-1.21.486-1.203 1.161-.222 1.462l4.552 1.42 10.532-6.645c.498-.303.953-.14.579.192l-8.533 7.701h-.002l.002.001-.314 4.692c.46 0 .663-.211.921-.46l2.211-2.15 4.599 3.397c.848.467 1.457.227 1.668-.785l3.019-14.228c.309-1.239-.473-1.8-1.282-1.434z"/></svg> <span data-i18n="booking_req_btn">Write on Telegram</span>
                </a>
            </div>
        </div>
        <div class="max-w-[1600px] mx-auto mt-12 pt-8 border-t border-gray-200 flex justify-between text-[10px] uppercase font-bold">
            <p>© 2026 Dilyara Kunanbayeva</p>
            <p>Dev by <a href="https://abzalt1.github.io" target="_blank" class="hover:underline">Abzalt1.dev</a></p>
        </div>
        </div>
    </footer>

    <a id="telegram-float" href="tg://resolve?domain=xiao_odi" class="fixed bottom-8 left-8 bg-black text-white w-12 h-12 flex items-center justify-center rounded-full shadow-lg z-50 transition-all duration-300 hover:scale-110 hover:bg-gray-800 transform translate-y-0 opacity-100" title="Contact on Telegram">
        <svg viewBox="0 0 24 24" fill="currentColor" class="w-7 h-7 translate-x-[-2px] translate-y-[1px]"><path d="M20.665 3.717l-17.73 6.837c-1.21.486-1.203 1.161-.222 1.462l4.552 1.42 10.532-6.645c.498-.303.953-.14.579.192l-8.533 7.701h-.002l.002.001-.314 4.692c.46 0 .663-.211.921-.46l2.211-2.15 4.599 3.397c.848.467 1.457.227 1.668-.785l3.019-14.228c.309-1.239-.473-1.8-1.282-1.434z"/></svg>
    </a>

    <button id="back-to-top" class="fixed bottom-8 right-8 bg-black text-white w-12 h-12 flex items-center justify-center rounded-full shadow-lg z-50 opacity-0 pointer-events-none transition-all duration-300 hover:scale-110" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
        <i class="ri-arrow-up-line text-xl"></i>
    </button>

    <script>
        // 1. ПЕРЕВОДЫ
        const translations = {
            ru: {
                role: "Коммерческая модель", location: "Алматы, Казахстан",
                about_title: "О модели",
                about_text: "В моделинге с 2025 года. Специализация: beauty, наружная реклама, street-style. Активно снимаюсь в Reels, Shorts и рекламных интеграциях. Профессионально создаю UGC-контент.",
                select_category: "Выберите категорию", booking: "Контакты",
                booking_req_title: "Прямая связь",
                booking_req_text: "Для обсуждения проектов и сотрудничества пишите в Telegram.",
                booking_req_btn: "Написать в Telegram"
            },
            en: {
                role: "Commercial Model", location: "Based in Almaty",
                about_title: "About Model",
                about_text: "Modeling since 2025. Specializing in beauty, outdoor advertising, street-style. Active in Reels, Shorts, and ad integrations. Professional UGC content creator.",
                select_category: "Select Category", booking: "Booking",
                booking_req_title: "Direct Booking",
                booking_req_text: "For inquiries and collaboration please contact me via Telegram.",
                booking_req_btn: "Write on Telegram"
            },
            kk: {
                role: "Коммерциялық модель", location: "Алматы, Қазақстан",
                about_title: "Модель туралы",
                about_text: "2025 жылдан бері модельдингте. Мамандануы: beauty, сыртқы жарнама, street-style. Reels, Shorts және жарнамалық интеграцияларда белсендімін. Кәсіби UGC контент жасаймын.",
                select_category: "Санатты таңдаңыз", booking: "Байланыс",
                booking_req_title: "Тікелей байланыс",
                booking_req_text: "Жобалар мен ынтымақтастықты талқылау үшін Telegram-ға жазыңыз.",
                booking_req_btn: "Telegram-ға жазу"
            }
        };
        function setLang(lang) {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang]?.[key]) el.innerText = translations[lang][key];
            });
            document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('lang-active'));
            document.getElementById('btn-' + lang).classList.add('lang-active');
        }
        setLang('ru');

        // NETLIFY IDENTITY REDIRECT
        if (window.netlifyIdentity) {
            window.netlifyIdentity.on("init", user => {
                if (!user) {
                    window.netlifyIdentity.on("login", () => { document.location.href = "/admin/"; });
                }
            });
        }

        // 2. ФИЛЬТР
        const titleMap = {
            all:'All', beauty:'Beauty', streetwear:'Streetwear',
            commercial:'Commercial', casual:'Casual', ugc:'UGC',
            food:'Food & Bev', acting:'Acting'
        };

        function filterContent(category) {
            document.getElementById('filters-section').scrollIntoView({ behavior: 'smooth' });
            document.getElementById('category-title-photo').innerText = titleMap[category] || 'Portfolio';
            document.getElementById('category-title-video').innerText = titleMap[category] || 'Portfolio';

            document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('filter-' + category)?.classList.add('active');

            const items = document.querySelectorAll('.media-item');
            
            // 1. Скрываем всё
            items.forEach(el => el.classList.add('filtering'));

            // 2. Ждем анимацию, перестраиваем сетку, показываем нужное
            setTimeout(() => {
                items.forEach(el => {
                    if (!el.hasAttribute('data-category')) return;
                    const cats = el.getAttribute('data-category').split(' ');
                    el.classList.toggle('hidden-item', category !== 'all' && !cats.includes(category));
                });
                
                checkEmpty('photo-grid', 'photo-empty');
                checkEmpty('video-grid', 'video-empty');
                
                // 3. Показываем обратно (с небольшой задержкой для перерисовки браузером)
                requestAnimationFrame(() => {
                    items.forEach(el => el.classList.remove('filtering'));
                });
            }, 300);
        }

        function checkEmpty(gridId, emptyId) {
            const visible = document.querySelectorAll('#' + gridId + ' .media-item:not(.hidden-item)');
            document.getElementById(emptyId).classList.toggle('visible', visible.length === 0);
        }

        // 3. ФОТО ЛАЙТБОКС
        let photoIndex = 0;
        let isPanning = false;
        let startCoords = { x: 0, y: 0 };
        let translateCoords = { x: 0, y: 0 };
        let wasDragged = false;

        function getVisiblePhotos() {
            return [...document.querySelectorAll('#photo-grid .media-item:not(.hidden-item) img')];
        }
        function updatePhotoCounter(photos) {
            document.getElementById('lb-photo-counter').innerText = (photoIndex + 1) + ' / ' + photos.length;
        }
        function setLightboxImage(src) {
            const lbImg = document.getElementById('lightbox-img');
            const loader = document.getElementById('photo-loader');
            
            lbImg.classList.remove('zoomed');
            lbImg.style.transform = '';
            translateCoords = { x: 0, y: 0 };
            loader.style.display = 'block';
            lbImg.style.opacity = '0.5';

            lbImg.onload = () => { loader.style.display = 'none'; lbImg.style.opacity = '1'; };
            lbImg.src = src;
            if (lbImg.complete) { loader.style.display = 'none'; lbImg.style.opacity = '1'; }
        }
        function openPhoto(img) {
            const photos = getVisiblePhotos();
            photoIndex = photos.indexOf(img);
            setLightboxImage(img.dataset.fullSrc || img.src);
            document.getElementById('lightbox').classList.add('open');
            document.body.style.overflow = 'hidden';
            updatePhotoCounter(photos);
            window.location.hash = 'photo-' + img.dataset.id;
        }
        function closePhoto(skipHistory = false) {
            document.getElementById('lightbox').classList.remove('open');
            const img = document.getElementById('lightbox-img');
            img.classList.remove('zoomed');
            img.style.transform = '';
            document.getElementById('photo-loader').style.display = 'none';
            document.body.style.overflow = '';
            if (skipHistory !== true) {
                history.replaceState(null, null, window.location.pathname + window.location.search);
            }
        }
        function photoGo(dir) {
            const photos = getVisiblePhotos();
            photoIndex = (photoIndex + dir + photos.length) % photos.length;
            const img = photos[photoIndex];
            setLightboxImage(img.dataset.fullSrc || img.src);
            updatePhotoCounter(photos);
            history.replaceState(null, null, '#photo-' + photos[photoIndex].dataset.id);
        }

        document.getElementById('lb-photo-close').onclick = () => closePhoto();
        document.getElementById('lb-photo-prev').onclick  = (e) => { e.stopPropagation(); photoGo(-1); };
        document.getElementById('lb-photo-next').onclick  = (e) => { e.stopPropagation(); photoGo(1); };
        document.getElementById('lightbox').addEventListener('click', function(e) {
            if (e.target === this) closePhoto();
        });
        
        const lbImg = document.getElementById('lightbox-img');
        
        lbImg.addEventListener('mousedown', (e) => {
            if (!lbImg.classList.contains('zoomed')) return;
            isPanning = true;
            wasDragged = false;
            startCoords.x = e.clientX - translateCoords.x;
            startCoords.y = e.clientY - translateCoords.y;
            lbImg.style.transition = 'none';
            e.preventDefault();
        });

        window.addEventListener('mousemove', (e) => {
            if (!isPanning) return;
            e.preventDefault();
            const x = e.clientX - startCoords.x;
            const y = e.clientY - startCoords.y;
            if (Math.abs(x - translateCoords.x) > 2 || Math.abs(y - translateCoords.y) > 2) wasDragged = true;
            translateCoords = { x, y };
            lbImg.style.transform = `translate(${x}px, ${y}px) scale(2.5)`;
        });

        window.addEventListener('mouseup', () => {
            if (isPanning) {
                isPanning = false;
                lbImg.style.transition = 'transform 0.3s ease, opacity 0.3s ease';
            }
        });

        lbImg.addEventListener('click', function(e) {
            e.stopPropagation();
            if (wasDragged) return;
            
            if (this.classList.contains('zoomed')) {
                this.classList.remove('zoomed');
                this.style.transform = '';
                translateCoords = { x: 0, y: 0 };
            } else {
                this.classList.add('zoomed');
            }
        });

        // SHARE BUTTON
        document.getElementById('lb-photo-share').onclick = async (e) => {
            e.stopPropagation();
            const url = window.location.href;
            if (navigator.share) {
                try { await navigator.share({ title: 'Dilyara Model Portfolio', url: url }); } catch (err) {}
            } else {
                navigator.clipboard.writeText(url).then(() => alert('Ссылка скопирована в буфер обмена!'));
            }
        };

        // DOWNLOAD BUTTON
        document.getElementById('lb-photo-download').onclick = (e) => {
            e.stopPropagation();
            const img = document.getElementById('lightbox-img');
            const link = document.createElement('a');
            link.href = img.src;
            link.download = img.src.split('/').pop() || 'download.jpg';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        };

        // 4. ВИДЕО ЛАЙТБОКС И ПРЕВЬЮ
        let videoIndex = 0;

        function getVisibleVideos() {
            return [...document.querySelectorAll('#video-grid .video-thumb.media-item:not(.hidden-item)')];
        }
        function updateVideoCounter(videos) {
            document.getElementById('lb-video-counter').innerText = (videoIndex + 1) + ' / ' + videos.length;
        }
        function openVideo(thumb) {
            const videos = getVisibleVideos();
            videoIndex = videos.indexOf(thumb);
            renderVideoLightbox(thumb);
            document.getElementById('video-lightbox').classList.add('open');
            document.body.style.overflow = 'hidden';
            updateVideoCounter(videos);
            window.location.hash = 'video-' + thumb.dataset.id;
        }
        function closeVideo(skipHistory = false) {
            const v = document.querySelector('#video-lightbox-inner video');
            if (v) { v.pause(); v.src = ''; }
            document.getElementById('video-lightbox-inner').innerHTML = ''; // Очищаем iframe
            document.getElementById('video-lightbox').classList.remove('open');
            document.body.style.overflow = '';
            if (skipHistory !== true) {
                history.replaceState(null, null, window.location.pathname + window.location.search);
            }
        }
        function videoGo(dir) {
            const videos = getVisibleVideos();
            const v = document.querySelector('#video-lightbox-inner video');
            if (v) { v.pause(); v.src = ''; }
            document.getElementById('video-lightbox-inner').innerHTML = '';
            videoIndex = (videoIndex + dir + videos.length) % videos.length;
            renderVideoLightbox(videos[videoIndex]);
            updateVideoCounter(videos);
            history.replaceState(null, null, '#video-' + videos[videoIndex].dataset.id);
        }
        function renderVideoLightbox(thumb) {
            const src    = thumb.getAttribute('data-src') || '';
            const videoUrl = thumb.getAttribute('data-video-url') || '';
            const label  = thumb.getAttribute('data-label') || '';
            const poster = thumb.getAttribute('data-poster') || '';
            const inner  = document.getElementById('video-lightbox-inner');

            if (src) {
                inner.classList.remove('landscape');
                inner.classList.remove('portrait');
                inner.innerHTML = `
                    <div class="video-loader"></div>
                    <video controls autoplay playsinline ${poster ? 'poster="'+poster+'"' : ''}>
                        <source src="${src}">
                    </video>
                    ${label ? '<div id="video-lightbox-title">' + label + '</div>' : ''}
                `;
                
                const video = inner.querySelector('video');
                const loader = inner.querySelector('.video-loader');
                
                const showLoader = () => loader.style.display = 'block';
                const hideLoader = () => loader.style.display = 'none';

                video.addEventListener('loadstart', showLoader);
                video.addEventListener('waiting', showLoader);
                video.addEventListener('canplay', hideLoader);
                video.addEventListener('playing', hideLoader);
                
                if (video.readyState < 3) showLoader();
            } else if (videoUrl) {
                // Определяем YouTube или Vimeo
                let embedSrc = '';
                let isVertical = false;

                const shortsMatch = videoUrl.match(/youtube\.com\/shorts\/([a-zA-Z0-9_-]{11})/);
                const ytMatch = videoUrl.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/);
                const vimeoMatch = videoUrl.match(/(?:https?:\/\/)?(?:www\.)?vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/);

                if (shortsMatch) {
                    embedSrc = `https://www.youtube.com/embed/${shortsMatch[1]}?autoplay=1&rel=0&modestbranding=1&loop=1&playlist=${shortsMatch[1]}`;
                    isVertical = true;
                } else if (ytMatch) {
                    embedSrc = `https://www.youtube.com/embed/${ytMatch[1]}?autoplay=1&rel=0&modestbranding=1`;
                } else if (vimeoMatch) {
                    embedSrc = `https://player.vimeo.com/video/${vimeoMatch[1]}?autoplay=1`;
                }

                if (embedSrc) {
                    if (isVertical) { inner.classList.remove('landscape'); inner.classList.add('portrait'); }
                    else { inner.classList.add('landscape'); inner.classList.remove('portrait'); }

                    inner.innerHTML = `
                        <iframe src="${embedSrc}" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
                        ${label ? '<div id="video-lightbox-title">' + label + '</div>' : ''}
                    `;
                }
            }
        }

        document.getElementById('lb-video-close').onclick = () => closeVideo();
        document.getElementById('lb-video-share').onclick = document.getElementById('lb-photo-share').onclick;
        document.getElementById('lb-video-prev').onclick  = (e) => { e.stopPropagation(); videoGo(-1); };
        document.getElementById('lb-video-next').onclick  = (e) => { e.stopPropagation(); videoGo(1); };
        document.getElementById('video-lightbox').addEventListener('click', function(e) {
            if (e.target === this) closeVideo();
        });

        // Клавиатура для обоих лайтбоксов
        document.addEventListener('keydown', (e) => {
            if (document.getElementById('lightbox').classList.contains('open')) {
                if (e.key === 'ArrowRight') { e.preventDefault(); photoGo(1); }
                if (e.key === 'ArrowLeft')  { e.preventDefault(); photoGo(-1); }
                if (e.key === 'Escape')     { e.preventDefault(); closePhoto(); }
            }
            if (document.getElementById('video-lightbox').classList.contains('open')) {
                if (e.key === 'ArrowRight') { e.preventDefault(); videoGo(1); }
                if (e.key === 'ArrowLeft')  { e.preventDefault(); videoGo(-1); }
                if (e.key === 'Escape')     { e.preventDefault(); closeVideo(); }
            }
        });

        // Свайпы для мобильных (Touch Events)
        function handleSwipe(el, callback) {
            let touchStartX = 0;
            let touchStartY = 0;

            el.addEventListener('touchstart', e => {
                touchStartX = e.changedTouches[0].screenX;
                touchStartY = e.changedTouches[0].screenY;
            }, {passive: true});

            el.addEventListener('touchend', e => {
                const touchEndX = e.changedTouches[0].screenX;
                const touchEndY = e.changedTouches[0].screenY;
                const diffX = touchEndX - touchStartX;
                const diffY = touchEndY - touchStartY;

                // Горизонтальный свайп (защита от случайных вертикальных скроллов)
                if (Math.abs(diffX) > 50 && Math.abs(diffY) < 30) {
                    if (diffX < 0) callback(1);  // Swipe Left -> Next
                    if (diffX > 0) callback(-1); // Swipe Right -> Prev
                }
            }, {passive: true});
        }

        handleSwipe(document.getElementById('lightbox'), (dir) => {
            if (!document.getElementById('lightbox-img').classList.contains('zoomed')) photoGo(dir);
        });
        handleSwipe(document.getElementById('video-lightbox'), videoGo);

        // Обработка кнопки "Назад" в браузере
        window.addEventListener('popstate', () => {
            const hash = window.location.hash;
            if (!hash || (!hash.startsWith('#photo-') && !hash.startsWith('#video-'))) {
                if (document.getElementById('lightbox').classList.contains('open')) closePhoto(true);
                if (document.getElementById('video-lightbox').classList.contains('open')) closeVideo(true);
            }
        });

        // 5. АНИМАЦИЯ ПАРАМЕТРОВ
        const observerOptions = { threshold: 0.1 };
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        document.querySelectorAll('.fade-in-up').forEach(el => observer.observe(el));

        // 6. ПАРАЛЛАКС ХЕДЕРА
        window.addEventListener('scroll', () => {
            const headerImg = document.getElementById('header-img');
            if (headerImg) {
                const scroll = window.scrollY;
                headerImg.style.transform = `translateY(${scroll * 0.1}px)`;
                headerImg.style.filter = `grayscale(100%) contrast(1.25) blur(${Math.min(scroll * 0.04, 20)}px) brightness(${Math.max(0.2, 1 - scroll / 600)})`;
            }
        });

        // 7. КНОПКА НАВЕРХ
        const backToTop = document.getElementById('back-to-top');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTop.classList.remove('opacity-0', 'pointer-events-none');
            } else {
                backToTop.classList.add('opacity-0', 'pointer-events-none');
            }
        });

        // 10. TELEGRAM BUTTON AUTO-HIDE
        const tgBtn = document.getElementById('telegram-float');
        let scrollTimeout;

        window.addEventListener('scroll', () => {
            if (!tgBtn) return;
            // Скрываем кнопку (уводим вниз и делаем прозрачной)
            tgBtn.classList.add('translate-y-24', 'opacity-0', 'pointer-events-none');
            
            clearTimeout(scrollTimeout);
            
            // Показываем обратно через 500мс после остановки скролла
            scrollTimeout = setTimeout(() => {
                tgBtn.classList.remove('translate-y-24', 'opacity-0', 'pointer-events-none');
            }, 500);
        });

        // 8. LOAD DATA & INIT
        async function initPortfolio() {
            try {
                // Добавляем timestamp, чтобы избежать кэширования старой версии data.json
                const response = await fetch('./data.json?t=' + Date.now());
                if (!response.ok) throw new Error('Failed to load data');
                const data = await response.json();

                // RENDER PHOTOS
                const photoGrid = document.getElementById('photo-grid');
                const photoEmpty = document.getElementById('photo-empty');
                
                if (data.photos) data.photos.forEach((item, index) => {
                    const div = document.createElement('div');
                    div.className = 'media-item photo-thumb reveal-item';
                    div.dataset.category = item.category;

                    const img = document.createElement('img');
                    img.loading = 'lazy';
                    img.decoding = 'async'; // Не блокирует прокрутку страницы при загрузке
                    img.src = item.thumb || item.src;
                    img.dataset.fullSrc = item.src;
                    img.alt = item.alt;
                    img.dataset.id = index;
                    img.onerror = function() {
                        this.closest('.media-item').remove();
                        checkEmpty('photo-grid', 'photo-empty');
                    };
                    
                    const wrapper = document.createElement('div');
                    wrapper.className = 'parallax-wrapper';
                    wrapper.appendChild(img);

                    div.innerHTML = `<div class="zoom-overlay"><i class="ri-zoom-in-line"></i><span class="photo-cat">${item.category}</span></div>`;
                    div.prepend(wrapper);
                    div.addEventListener('click', () => openPhoto(img));
                    
                    photoGrid.insertBefore(div, photoEmpty);
                });

                // RENDER VIDEOS
                const videoGrid = document.getElementById('video-grid');
                const videoEmpty = document.getElementById('video-empty');

                // Observer для ленивой загрузки видео
                const videoLazyLoadObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const video = entry.target;
                            if (video.dataset.src) {
                                video.src = video.dataset.src;
                                video.removeAttribute('data-src');
                                videoLazyLoadObserver.unobserve(video);
                            }
                        }
                    });
                }, { rootMargin: '200px' });

                // Observer для автоплея при скролле (Mobile experience)
                const videoAutoplayObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        const video = entry.target;
                        const thumb = video.closest('.video-thumb');
                        // Если видео видно более чем на 50%
                        if (entry.isIntersecting) {
                            video.muted = true;
                            video.play().then(() => thumb && thumb.classList.add('playing')).catch(() => {});
                        } else {
                            video.pause();
                            if (thumb) thumb.classList.remove('playing');
                        }
                    });
                }, { threshold: 0.5 });

                if (data.videos) data.videos.forEach((item, index) => {
                    const div = document.createElement('div');
                    div.className = 'media-item video-thumb reveal-item';
                    div.dataset.category = item.category;
                    div.dataset.src = item.src || '';
                    div.dataset.videoUrl = item.video_url || '';
                    div.dataset.label = item.label || '';
                    div.dataset.poster = item.poster || '';
                    div.dataset.id = index;

                    let innerContent = '';
                    let muteBtnHtml = '';

                    if (item.src) {
                        innerContent = `<video data-src="${item.src}" poster="${item.poster}" muted loop playsinline preload="none" class="preview-video"></video>`;
                        muteBtnHtml = `<div class="mute-btn"><i class="ri-volume-mute-line"></i></div>`;
                    } else {
                        innerContent = `<img src="${item.poster}" onerror="this.closest('.media-item').remove(); checkEmpty('video-grid', 'video-empty');" alt="Cover" class="w-full h-full object-cover">`;
                    }

                    div.innerHTML = `
                        ${innerContent}
                        <div class="grid-video-loader"></div>
                        <div class="play-overlay"><i class="ri-play-circle-line"></i></div>
                        ${muteBtnHtml}
                        <div class="reels-icon"><i class="ri-movie-fill"></i></div>
                        <span class="vid-label">${(item.label || '').split(' ')[0]}</span>
                    `;

                    // Events
                    div.addEventListener('click', () => openVideo(div));
                    const previewVideo = div.querySelector('.preview-video');
                    if (previewVideo) {
                        videoLazyLoadObserver.observe(previewVideo);
                        videoAutoplayObserver.observe(previewVideo);

                        const loader = div.querySelector('.grid-video-loader');
                        if (loader) {
                            previewVideo.addEventListener('loadstart', () => {
                                if (previewVideo.readyState < 3) loader.style.display = 'block';
                            });
                            previewVideo.addEventListener('waiting', () => loader.style.display = 'block');
                            previewVideo.addEventListener('playing', () => loader.style.display = 'none');
                            previewVideo.addEventListener('canplay', () => loader.style.display = 'none');
                            previewVideo.addEventListener('stalled', () => loader.style.display = 'block');
                        }
                        
                        // Mute button logic
                        const muteBtn = div.querySelector('.mute-btn');
                        if (muteBtn) {
                            muteBtn.addEventListener('click', (e) => {
                                e.stopPropagation();
                                previewVideo.muted = !previewVideo.muted;
                                muteBtn.innerHTML = previewVideo.muted ? '<i class="ri-volume-mute-line"></i>' : '<i class="ri-volume-up-line"></i>';
                            });
                        }
                    }

                    videoGrid.insertBefore(div, videoEmpty);
                });

                // START ANIMATIONS
                startAnimations();
                startParallax();

                // Проверка пустых состояний
                checkEmpty('photo-grid', 'photo-empty');
                checkEmpty('video-grid', 'video-empty');

                // Проверка URL hash для открытия лайтбокса
                const hash = window.location.hash;
                if (hash) {
                    if (hash.startsWith('#photo-')) {
                        const id = hash.replace('#photo-', '');
                        const el = document.querySelector(`#photo-grid img[data-id="${id}"]`);
                        if (el) { filterContent('all'); openPhoto(el); }
                    } else if (hash.startsWith('#video-')) {
                        const id = hash.replace('#video-', '');
                        const el = document.querySelector(`#video-grid .video-thumb[data-id="${id}"]`);
                        if (el) { filterContent('all'); openVideo(el); }
                    }
                }

            } catch (error) {
                console.error('Error loading portfolio:', error);
                document.getElementById('preloader').style.display = 'none';
            }
        }

        function startAnimations() {
            const preloader = document.getElementById('preloader');
            const mediaItems = document.querySelectorAll('.media-item');
            
            setTimeout(() => {
                preloader.classList.add('opacity-0', 'pointer-events-none');
                document.body.classList.remove('overflow-hidden');
                document.getElementById('lang-switcher').classList.add('visible');

                const mediaObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                            mediaObserver.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.1 });
                mediaItems.forEach(item => mediaObserver.observe(item));
            }, 500);
        }

        function startParallax() {
            function loop() {
                const thumbs = document.querySelectorAll('.photo-thumb');
                thumbs.forEach(thumb => {
                    const wrapper = thumb.querySelector('.parallax-wrapper');
                    if (!wrapper) return;
                    
                    const rect = thumb.getBoundingClientRect();
                    if (rect.top < window.innerHeight && rect.bottom > 0) {
                        const speed = 0.1;
                        const offset = (rect.top - window.innerHeight / 2) * speed;
                        wrapper.style.transform = `translateY(${offset}px)`;
                    }
                });
                requestAnimationFrame(loop);
            }
            requestAnimationFrame(loop);
        }

        // Run init
        window.addEventListener('load', initPortfolio);

    </script>
</body>
</html>